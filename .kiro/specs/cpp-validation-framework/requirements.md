# 要件定義書

## はじめに

この機能は、42 スクールの C++カリキュラム（cpp00-cpp04）における学生の提出物を自動的に検証・テストするフレームワークです。C++98 標準への準拠、禁止機能の使用チェック、メモリリーク検出、コード品質分析を自動化し、教育的価値の高いフィードバックを提供します。

## 要件

### 要件 1

**ユーザーストーリー:** 教育者として、学生の C++コードが 42 スクールの基準に準拠しているかを自動的にチェックしたい。そうすることで、手動レビューの時間を削減し、一貫した評価基準を適用できる。

#### 受け入れ基準

1. WHEN 学生が C++ファイルを提出する THEN システムは自動的に C++98 標準への準拠をチェックする SHALL
2. WHEN 禁止された C++機能（C++11+、STL コンテナ、using namespace 等）が検出される THEN システムは具体的なエラーメッセージと行番号を表示する SHALL
3. WHEN コンパイルエラーが発生する THEN システムは詳細なエラー情報と修正提案を提供する SHALL
4. WHEN `-Wall -Wextra -Werror -std=c++98`フラグでコンパイルが成功する THEN システムは「コンパイル成功」ステータスを表示する SHALL

### 要件 2

**ユーザーストーリー:** 学生として、自分のコードにメモリリークがないことを確認したい。そうすることで、RAII 原則を正しく実装し、メモリ管理のベストプラクティスを学習できる。

#### 受け入れ基準

1. WHEN macOS 環境でコードが実行される THEN システムは AddressSanitizer を使用してメモリエラーを検出する SHALL
2. WHEN Ubuntu 環境が利用可能である THEN システムは valgrind を使用してメモリリーク検出を実行する SHALL
3. WHEN メモリリークが検出される THEN システムは漏洩箇所の詳細情報（ファイル名、行番号、サイズ）を表示する SHALL
4. WHEN メモリエラーが検出されない THEN システムは「メモリ管理：合格」ステータスを表示する SHALL

### 要件 3

**ユーザーストーリー:** 教育者として、学生のコードが適切なクラス設計パターンを実装しているかを確認したい。そうすることで、OOP 原則の理解度を評価し、適切な指導を提供できる。

#### 受け入れ基準

1. WHEN cpp02 以降のモジュールでクラスが定義される THEN システムは Orthodox Canonical Form の実装をチェックする SHALL
2. WHEN クラスにデストラクタが必要な場合 THEN システムは適切なデストラクタの実装を検証する SHALL
3. WHEN RAII 原則に違反するコードが検出される THEN システムは具体的な改善提案を提供する SHALL
4. WHEN 適切な encapsulation（private/public アクセス制御）が実装されている THEN システムは「クラス設計：合格」ステータスを表示する SHALL

### 要件 4

**ユーザーストーリー:** 学生として、自分のコードが各モジュールの学習目標を達成しているかを確認したい。そうすることで、理解不足の領域を特定し、効果的に学習を進められる。

#### 受け入れ基準

1. WHEN 特定のモジュール（cpp00-cpp04）のコードが提出される THEN システムはそのモジュール固有の要件をチェックする SHALL
2. WHEN cpp00 のコードが提出される THEN システムは namespace、クラス、メンバ関数の適切な使用を検証する SHALL
3. WHEN cpp01 のコードが提出される THEN システムはメモリ割り当て、ポインタ、参照の適切な使用を検証する SHALL
4. WHEN 学習目標が達成されていない場合 THEN システムは具体的な学習リソースと改善提案を提供する SHALL

### 要件 5

**ユーザーストーリー:** 開発者として、検証結果を構造化された形式で取得したい。そうすることで、CI/CD パイプラインに統合し、自動化されたワークフローを構築できる。

#### 受け入れ基準

1. WHEN 検証が完了する THEN システムは JSON 形式で詳細な結果レポートを生成する SHALL
2. WHEN 複数の演習が同時に検証される THEN システムは並列処理で効率的に実行する SHALL
3. WHEN 検証結果が GitHub Actions で使用される THEN システムは適切な終了コードとログ出力を提供する SHALL
4. WHEN 検証履歴を追跡する必要がある THEN システムはタイムスタンプ付きの結果を保存する SHALL

### 要件 6

**ユーザーストーリー:** 教育者として、学生に対して建設的で教育的なフィードバックを提供したい。そうすることで、学生の学習を促進し、C++の理解を深めさせることができる。

#### 受け入れ基準

1. WHEN エラーが検出される THEN システムは日本語と英語の両方でフィードバックを提供する SHALL
2. WHEN 改善提案が生成される THEN システムは具体的なコード例と説明を含める SHALL
3. WHEN 学習リソースが推奨される THEN システムは関連するドキュメントやチュートリアルへのリンクを提供する SHALL
4. WHEN フィードバックが表示される THEN システムは重要度（Critical/Major/Minor）に応じて色分けして表示する SHALL
